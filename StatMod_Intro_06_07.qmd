---
subtitle: "Sechster und siebter Termin"
---

# Einstieg

## Zur Erinnerung

-   :computer: Arbeiten Sie aktiv mit.

-   :raising_hand: Stellen Sie Fragen.

-   :muscle: <https://tweedback.de/xxx/>

::: center
{{< qrcode https://tweedback.de/xxx/quiz width=400 height=400 >}}
:::

## Tipps f√ºr den Vorlesungserfolg

-   Kommen Sie zur Vorlesung!

-   Vermeiden Sie Ablenkung.

-   Arbeiten Sie die Vorlesung von Anfang an **vor** und nach. Nutzen Sie daf√ºr das Dokument *Quantitative Datenanalyse -- Umsetzung mit R*.

-   Stellen Sie Fragen.

-   Unterst√ºtzen Sie sich gegenseitig.

# R√ºckblick

## Was beim letzten Mal geschah ...

-   Sie haben univariate und multivariate Regressionsmodelle aufgestellt.

-   Sie haben die Steigung $\hat\beta_1$ und den $y$-Achsenabschnitt $\hat\beta_0$ interpretiert.

-   Sie wissen, was das Bestimmtheitsma√ü $R^2$ ist.

-   Sie haben die Regressionskoeffizienten zu unterschiedlich skalierten unabh√§ngigen Variablen interpretiert.

-   Sie haben die Inferenz in der Regressionanalyse kennengelernt.

-   Sie k√∂nnen zwischen verschiedenen Modellen unterscheiden und geeignete Modelle ausw√§hlen.

## Heutiges Thema üè´

-   Kausale Inferenz

::: center
![](img/Memes/RedBlue-Causal.jpg){width="60%"}
:::

## Was Sie lernen üë©‚Äçüè´

-   Was ein potenzielles Ergebnis (Potential Outcome) ist; was ein Counterfactual ist; wie kausale Effekte definiert werden k√∂nnen und warum die Bestimmung von kausalen Effekten so herausfordernd ist.

-   Die Grundlagen von kausalen Graphen: Was ein Pfeil aussagt; was unter einem Kausalen Modell verstanden werden kann; den Unterschied zwischen Beobachten und Handeln im Kontext kausaler Inferenz.

-   Zwischen Beschreibung, Vorhersage und Kausaler Inferenz zu unterscheiden; warum diese Unterscheidung wichtig ist und was die Kausale Leiter ist.

## Qualitative Annahmen

-   Daten sind nicht einfach nur da, sie haben eine Entstehungsgeschichte: einen **datengenerierenden Prozess**.
-   Im Rahmen der Kausalen Modellierung werden *qualitative*, kausale Modellannahmen mathematisch / graphisch dargestellt.
-   Anhand der *angenommenen* Modelle
    -   kann entschieden werden, ob kausale Effekte bestimmbar sind,
    -   k√∂nnen √ºberpr√ºfbare Implikationen entwickelt werden.
-   Schwerpunkt dieser Einheit: Erkennen und Vermeiden von Verzerrungen im *quantitativen* statistischen Modell.

## Kausale Leiter

<br> Pearl (2019) unterscheidet 3 Stufen der kausalen Modellierung:

-   **Assoziation**: $Pr(y|x)$ -- Beobachtung: *Was ist*?\
    Wie wahrscheinlich ist $Y=y$, wenn ich $X=x$ beobachte?

-   **Intervention**: $Pr(y|do(x))$ -- Tun: *Was w√§re*?\
    Wie wahrscheinlich ist $Y=y$, wenn ich $X=x$ setze, d.¬†h. manipuliere?

-   **Counterfactuals**: $Pr(y_x|x',y')$ -- Vorstellung: *Was w√§re gewesen*?\
    Wir haben $X=x'$ und als Folge $Y=y'$ beobachtet. Wie wahrscheinlich ist dann $Y=y$,\
    wenn ich $X=x$ gesetzt h√§tte?
    
::: footnote
Pearl, J. (2019). The Seven Tools of Causal Inference with Reflections on Machine Learning. *Communications of the ACM*, **62(3)**, 54-60. <https://doi.org/10.1145/3241036>
:::    
    
## $X \rightarrow Y$

<br>

Kausalit√§t

$$X \rightarrow Y$$

Intuitiv:

- Wird $X$ ge√§ndert, √§ndert sich $Y$ &ndash; umgekehrt *nicht*. Z.¬†B. √§ndert sich mein Gewicht ($Y$), wenn ich gr√∂√üer werde ($X$), leider wachse ich nicht mit meinem Gewicht.
- √Ñndert sich $P(X)$, so √§ndert sich $P(Y|X)$ nicht.


## Strucutral Causal Model

::::: columns
::: {.column width="50%"}
- Ein **Structural Causal Model** (SCM) besteht aus zwei Variablentypen: dem endogenen Variablenset $V$ (innerhalb des Modells) und dem exogenen Variablenset $U$ (au√üerhalb des Modells). Au√üerdem aus Funktionen $f()$, die den Variablen $V$ einen Wert auf Basis der anderen Variablen im Modell zuweisen.
:::

::: {.column width="50%"}
::: center
![**Directed Acyclic Graph (DAG)**](img/Sonstige/SCM.png){width="60%"}
:::
:::
:::::

- Beispiel: $X \rightarrow Y$ 
  + $X = U_X$: $X$ h√§ngt von keiner Variable im Modell ab, nur von $U_X$.
  + $Y = f_{Y}(X, U_{Y})$: $Y$ h√§ngt von $X$ ab (und von $U_Y$).
  + Die exogenen Variablen (*Fehler*) von $X$ und $Y$ sind unabh√§ngig. 


## Grundelemente der DAGs (I/II)

In DAGs werden kausale Beziehungen durch einen Pfeil ausgedr√ºckt:

-   $X \rightarrow Y$

$X$ kann kausal auf $Y$ wirken, aber $Y$ nicht auf $X$. $X$ ist ein Elternteil (*parent*) von $Y$, $Y$ ein Kind (*child*) von $X$.

<br> 
Aus drei Variablen k√∂nnen folgende Grundelemente der DAGs gebildet werden:

-   Chain (Kette): $X \rightarrow C \rightarrow Y$
-   Fork (Gabel): $X \leftarrow C \rightarrow Y$
-   Inverted Fork (umgedrehte Gabel): $X \rightarrow C \leftarrow Y$

In der Chain ist $X$ jetzt ein Vorfahre (*ancestor*) von $Y$ und $Y$ ein Nachfahre (*descendant*) von $X$.

## Grundelemente der DAGs (II/II)

| Pfad | $X \rightarrow C \rightarrow Y$ | $X \leftarrow C \rightarrow Y$ | $X \rightarrow C \leftarrow Y$ |
|------------------|------------------|------------------|------------------|
| Name | Chain (Kette) | Fork (Gabel) | Inverted Fork (umgedrehte Gabel) |
| Bezeichnung $C$ | Mediator | Confounder, Moderator | Collider |
| Zusammenhang $X$ und $Y$ | kausal | nicht-kausal |kein Zusammenhang |
| Auswirkung von $C$ |   | $X$ und $Y$ haben eine gemeinsame Ursache: $C$ | $X$ und $Y$ haben eine gemeinsame Wirklung: $C$ |
| Adjustierung $C$ | blockiert kausalen Pfad | blockiert nicht-kausalen Pfad | √∂ffnet nicht- kausalen Pfad |

::: footnote
Adjustierung kann z.¬†B. √ºber die Aufnahme der Variablen $C$ in das Modell erfolgen oder √ºber eine Stratifizierung der Stichprobe.
:::

## Vorgehen

Vor der Fallstudie bearbeiten wir einige interaktive Tutorials des Kurses

> *WWWEKI* -- Was, wie, warum? Einstiegskurs Kausale Inferenz

-   Das erste Tutorial f√ºhren wir gemeinsam durch: <https://fomshinyapps.shinyapps.io/WWWEKI_Modul_01/>

-   Die Tutorien <https://fomshinyapps.shinyapps.io/WWWEKI_Modul_02/> und <https://fomshinyapps.shinyapps.io/WWWEKI_Modul_03/> werden jeweils in Gruppen bearbeitet.

-   Anschlie√üend bearbeiten wir <https://fomshinyapps.shinyapps.io/WWWEKI_Modul_07/> wieder gemeinsam.

## Ressourcen

-   Alle Tutorien: <https://github.com/luebby/WWWEKI>

-   Begleitende Videos: <https://wwweki.gitlab.io/interviews/>

## Fallstudie üíª

::::::: columns
:::: {.column width="50%"}
-   posit Cloud: In **Ihr** Projekt einloggen.

::: center
![](img/Software/posit_Project_StatistischeModellierung.png){width="80%"}
:::
::::

:::: {.column width="50%"}
-   Lokal: RStudio durch Klick auf `StatMod_WiSe24.Rproj` starten oder RStudio aufrufen, das letzte Projekt m√ºsste automatisch geladen werden.

::: center
![](img/Software/RStudio_Project_StatistischeModellierung.png){width="60%"}
:::
::::
:::::::

√ñffnen Sie die Datei `KausaleModellierung.qmd` im Ordner `fallstudien`.
